/*! Fabrik */

define(["jquery"],function(i){return"object"===typeOf(window.FabrikAdmin)||(FabrikAdmin={model:{fields:{element:{}}},reTip:function(){$$(".hasTip").each(function(e){var t=e.get("title");if(t){var a=t.split("::",2);e.store("tip:title",a[0]),e.store("tip:text",a[1])}}),new Tips($$(".hasTip"),{maxTitleChars:50,fixed:!1}),"undefined"!=typeof jQuery&&(jQuery(".hasTooltip").tooltip({html:!0,container:"body"}),jQuery(document).popover({selector:".hasPopover",trigger:"hover"}))}},window.fireEvent("fabrik.admin.namespace"),i(document).on("click",".btn-group label:not(.active)",null,function(e){var t=i(this),a=i("#"+t.attr("for"));a.prop("checked")||(t.closest(".btn-group").find("label").removeClass("active btn-success btn-danger btn-primary"),""===a.val()?t.addClass("active btn-primary"):0===a.val().toInt()?t.addClass("active btn-danger"):t.addClass("active btn-success"),a.prop("checked",!0),a.trigger("change"))}),jQuery(document).on("subform-row-add",function(e,t){var a=t.getAttribute("data-base-name"),i=t.getAttribute("data-group");if(i.startsWith(a)){var r=i.slice(a.length),n=new Event("change");t.getElements("select").each(function(e){e.set("value",e.getElement("option").get("value")),e.dispatchEvent(n)}),t.getElements("input, select, textarea").each(function(e){if(e.id){var i=e.id,n=i.replace(r+"__","X__");$H(FabrikAdmin.model.fields).each(function(e,t){if("null"!==typeOf(FabrikAdmin.model.fields[t][n])){var a=Object.clone(FabrikAdmin.model.fields[t][n]);!1!==a&&(a.cloned(i,r),FabrikAdmin.model.fields[t][i]=a)}})}})}else fconsole("Fabrik namespace: new subform row, but data-group=",i,"does not start with data-base-name=",a)})),FabrikAdmin});